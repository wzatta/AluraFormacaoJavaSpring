package com.cilazatta.vollMed.services;

import java.util.List;
import java.util.stream.Collectors;

import com.cilazatta.vollMed.dto.EnderecoDTO;
import com.cilazatta.vollMed.dto.mapper.EnderecoMapper;
import com.cilazatta.vollMed.entities.Endereco;
import com.cilazatta.vollMed.exceptions.RecordNotFoundException;
import com.cilazatta.vollMed.repository.EnderecoRepository;

public class EnderecoService {

	private final EnderecoRepository repo;
	private final EnderecoMapper mapper;
	
	public EnderecoService(EnderecoRepository repo, EnderecoMapper mapper) {
		this.repo = repo;
		this.mapper = mapper;
	}
	
	public EnderecoDTO cadastrar(EnderecoDTO dto) {
		Endereco endereco = new Endereco();
		endereco = mapper.toObj(dto);
		endereco = repo.save(endereco);
		dto = mapper.toDTO(endereco);
		return dto;
	}
	
	public List<EnderecoDTO> findAll(){
		return repo.findAll().stream()
				.map(mapper::toDTO)
				.collect(Collectors.toList());
	}
	
	public EnderecoDTO findById(Long id) {
		return repo.findById(id)
				.map(mapper::toDTO)
				.orElseThrow(()-> new RecordNotFoundException(id));
	}
	
	
	
	
}
